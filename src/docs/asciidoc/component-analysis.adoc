== Analysis

=== Description

Analysis within Cortex is a process in which instructions are converted to a graph. Such a graph
contains edges, which represent additional information, generally linked to one or more instructions.

The analysis process is split into separate pieces known as processors.
A processor receives the graph and can make any modification to it, such as adding edges.
These edges can then be used by the next processors to further update the graph.

The following paragraphs describe notable types of processors.

=== Optimizing Processors

Optimizing processors analyse a program's data flow, looking for optimizations which can be done at
instruction level. These optimizations should however not modify the program's behaviour in any way.
Optimizations made make it easier to further process the graph; they are not specifically meant
to make a program faster. (Althrough this commonly happens as a side effect).

For example, when a value can be known ahead of time to always be certain values (or within a certain range),
an optimizing processor can take this information and possibly eliminate instructions.

A basic example of this, is the following "self-contained" set of instrunctions.
Here, the instructions do not have any external dependencies, always yielding the same result.

include::{snippets}/instructions-optimizer/request-body.adoc[]

Performing analysis on these instructions with optimization enabled yields the following result;

include::{snippets}/instructions-optimizer/response-body.adoc[]

=== Flow Processors

// Explain control flow

// Test Example of visualized control flow:

[source]
.example of control flow mapping
----
              START               01 through 08
01 through 08 INSTRUCTION_JUMP_IF 09 through 12
01 through 08 INSTRUCTION_JUMP_IF 13
09 through 12 BLOCK_END           13
           13 END
----

// Test example of describing all control flow types

=== APIs

// Showcase optimization API

include::{snippets}/instructions-optimizer/curl-request.adoc[]

include::{snippets}/instructions-optimizer/request-body.adoc[]

include::{snippets}/instructions-optimizer/request-fields.adoc[]

include::{snippets}/instructions-optimizer/response-body.adoc[]

include::{snippets}/instructions-optimizer/response-fields.adoc[]

// Showcase new graph edge visualization API

// Showcase flow mapping API

include::{snippets}/instructions-flow-mapping/curl-request.adoc[]

include::{snippets}/instructions-flow-mapping/request-body.adoc[]

include::{snippets}/instructions-flow-mapping/request-fields.adoc[]

include::{snippets}/instructions-flow-mapping/response-body.adoc[]

include::{snippets}/instructions-flow-mapping/response-fields.adoc[]

